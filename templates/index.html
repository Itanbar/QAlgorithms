<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grover's Algorithm Visualiser</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <main class="page">
      <header class="page__header">
        <h1>Grover's Algorithm Animation</h1>
        <p>
          This interactive animation shows how Grover's search algorithm boosts the
          amplitude of the marked state. Choose the number of qubits to set the
          search-space size (2<sup>n</sup> basis states). The oracle always marks the
          all-ones basis state as the solution.
        </p>
      </header>

      <section class="controls">
        <button id="start-btn" type="button">Start</button>
        <button id="pause-btn" type="button" disabled>Pause</button>
        <button id="step-btn" type="button">Step</button>
        <button id="reset-btn" type="button">Reset</button>
        <label class="controls__qubits">
          Qubits
          <select id="qubit-select">
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5" selected>5</option>
            <option value="6">6</option>
          </select>
        </label>
        <label class="controls__speed">
          Speed
          <input id="speed-range" type="range" min="600" max="2000" value="1200" />
        </label>
      </section>

      <section class="visualisation">
        <div class="visualisation__states" id="state-container"></div>
        <aside class="visualisation__info">
          <h2>Step description</h2>
          <p id="step-description">Click Start or Step to apply Grover's iterate.</p>
          <p class="visualisation__status">
            <span>Status:</span>
            <strong id="status-label">Idle</strong>
          </p>
          <div class="legend">
            <span class="legend__item legend__item--positive">positive amplitude</span>
            <span class="legend__item legend__item--negative">negative amplitude</span>
          </div>
          <div class="iteration">
            <span>Iteration:</span>
            <strong id="iteration-count">0</strong>
          </div>
          <div class="target">
            <span>Target state:</span>
            <strong id="target-state">|11111‚ü©</strong>
          </div>
          <div class="target">
            <span>Target probability:</span>
            <strong id="target-probability">0.0%</strong>
          </div>
        </aside>
      </section>

      <section class="explanation">
        <h2>How it works</h2>
        <ol>
          <li>
            The <strong>oracle</strong> flips the sign of the marked state's amplitude,
            preparing it for amplification.
          </li>
          <li>
            The <strong>diffusion operator</strong> reflects all amplitudes around their
            average, increasing the marked state's amplitude and decreasing the others.
          </li>
          <li>
            Each Grover step consists of the oracle followed by diffusion. After every
            step the probability (the square of the amplitude) is recomputed, so you can
            see the marked state grow and then oscillate as you repeat the iterate.
          </li>
        </ol>
      </section>
    </main>

    <script src="{{ url_for('static', filename='js/grover.js') }}" defer></script>
  </body>
</html>
